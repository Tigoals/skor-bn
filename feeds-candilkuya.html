<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Berita Candil Kuya</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#0b1220;
  --card:#111827;
  --accent:#3b82f6;
  --accent2:#06b6d4;
  --success:#10b981;
  --warning:#facc15;
  --danger:#e11d48;
}

*{
  box-sizing:border-box;
}

body{
  margin:0;
  font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial;
  background:linear-gradient(135deg,#0b1220,#111827);
  color:#f9fafb;
  padding:40px 20px;
  display:flex;
  flex-direction:column;
  align-items:center;
}

/* HEADER */
h1{
  font-size:32px;
  font-weight:900;
  letter-spacing:1px;
  margin-bottom:30px;
  background:linear-gradient(to right,#3b82f6,#06b6d4);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}

/* GRID */
.post-list{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(280px,1fr));
  gap:28px;
  max-width:1200px;
  width:100%;
  margin-bottom:40px;
}

/* CARD */
.post-card{
  background:rgba(255,255,255,0.05);
  backdrop-filter:blur(12px);
  border-radius:20px;
  overflow:hidden;
  cursor:pointer;
  transition:all .3s ease;
  border:1px solid rgba(255,255,255,0.05);
}

.post-card:hover{
  transform:translateY(-8px);
  box-shadow:0 20px 40px rgba(0,0,0,0.4);
}

.post-card img{
  width:100%;
  height:200px;
  object-fit:cover;
  transition:transform .4s ease;
}

.post-card:hover img{
  transform:scale(1.05);
}

.post-card .title{
  padding:18px;
  font-size:16px;
  font-weight:700;
  line-height:1.4;
}

/* BUTTONS */
button{
  border:none;
  border-radius:999px;
  padding:14px 28px;
  font-weight:700;
  cursor:pointer;
  transition:.3s ease;
  letter-spacing:.5px;
}

#loadMoreBtn{
  background:linear-gradient(to right,var(--accent),var(--accent2));
  color:#fff;
  margin-bottom:30px;
}

#loadMoreBtn:hover{
  transform:translateY(-3px);
  box-shadow:0 10px 20px rgba(0,0,0,.4);
}

.buttons{
  display:flex;
  flex-wrap:wrap;
  gap:18px;
  justify-content:center;
  margin-bottom:40px;
}

#downloadBtn{
  background:var(--success);
  color:#fff;
}

#copyBtn{
  background:var(--warning);
  color:#111;
}

#moreBtn{
  background:var(--danger);
  color:#fff;
}

button:hover{
  transform:translateY(-3px);
  box-shadow:0 10px 20px rgba(0,0,0,.4);
}

/* POSTER */
#output{
  width:1080px;
  height:1080px;
  position:relative;
  display:none;
  border-radius:20px;
  overflow:hidden;
  box-shadow:0 30px 60px rgba(0,0,0,.5);
}

/* Blur background */
.blur-bg{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  object-fit:cover;
  filter:blur(40px) brightness(.5);
  transform:scale(1.2);
}

/* Main image */
.bg-image{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  object-fit:contain;
}

/* Branding */
.info-link{
  position:absolute;
  top:40px;
  left:40px;
  background:linear-gradient(to right,#3b82f6,#06b6d4);
  padding:10px 24px;
  border-radius:50px;
  font-weight:800;
  font-size:20px;
  letter-spacing:2px;
}

/* Title block */
.judul{
  position:absolute;
  bottom:0;
  left:0;
  width:100%;
  padding:50px 60px;
  font-size:56px;
  font-weight:900;
  line-height:1.1;
  background:linear-gradient(to top,rgba(0,0,0,.85),transparent);
}

/* Watermark */
.watermark-domain{
  position:absolute;
  bottom:20px;
  left:50%;
  transform:translateX(-50%);
  font-size:20px;
  font-weight:700;
  opacity:.9;
}

/* RESPONSIVE */
@media(max-width:768px){

  #output{
    width:100%;
    height:auto;
    aspect-ratio:1/1;
  }

  .judul{
    font-size:32px;
    padding:30px;
  }

  h1{
    font-size:24px;
  }

}
</style>
</head>
<body>
  <h1>Berita Candil Kuya</h1>
  <div class="post-list" id="postList"></div>
  <button id="loadMoreBtn">Load More</button>

<div class="buttons">
  <button id="downloadBtn">Download Poster</button>
  <button id="copyBtn">Copy Isi Berita</button>
  <button id="moreBtn">Selengkapnya</button>
</div>

  <div id="output">
    <img id="blurBg" class="blur-bg" src="" alt="blur background">
    <img id="bgImage" class="bg-image" src="" alt="background">
    <div class="info-link">CANDILKUYA</div>
    <div class="judul" id="judulPreview">Judul Berita</div>
    <div class="watermark-domain">
      Read: <img src="https://cdn-icons-png.flaticon.com/512/10453/10453141.png" alt="Facebook" />
      <span>candil.eu.org</span>
    </div>
  </div>

 <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/dom-to-image/2.6.0/dom-to-image.min.js"></script>-->
  <!-- <script>
    let allItems = [];
    let currentIndex = 0;
    const itemsPerPage = 6;
  let selectedContent = '';
let selectedLink = '';


    function stripHtmlTags(html) {
      const div = document.createElement('div');
      div.innerHTML = html;
      return div.innerText;
    }

 function loadFeed() {
  const url = 'https://sindikasi.okezone.com/index.php/rss/14/RSS2.0';

  fetch(url)
    .then(response => response.text())
    .then(data => {
      const parser = new DOMParser();
      const xml = parser.parseFromString(data, 'application/xml');
      const items = Array.from(xml.getElementsByTagName('item'));
allItems = items.map(item => {
  const title = item.querySelector('title')?.textContent.trim() || '';
  const description = item.querySelector('description')?.textContent || '';
  const link = item.querySelector('link')?.textContent || '';
  const mediaContent = item.getElementsByTagName('media:content')[0];
  const img = mediaContent?.getAttribute('url') || 'https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjA6kcY4Hzd73dnIOUXZps2RBiFDtK32lafwhLC4s0Wi4ccw2w1Zu5PZLZriKb873MU9OTdwo-ySCLx5uVamhGdqwNlovTYSzqfN_zXiJi-4-DKXFob7Blx2bsgCi10hrUF480ZwpLdjxsGxMQvHcBZUKPD313JB2PH3ovOk0N2TsYLjY4pWlFSma6ahUw/s1600/No%20Image%20250%20x%20166.jpg';
  return { title, description, link, img };
});

      showNextItems();
    })
    .catch(err => {
      console.error(err);
      alert("âŒ Gagal memuat feed Okezone.");
    });
}

    function showNextItems() {
      const list = document.getElementById('postList');
      const nextItems = allItems.slice(currentIndex, currentIndex + itemsPerPage);
      nextItems.forEach(({ title, description, link, img }) => {
        const card = document.createElement('div');
        card.className = 'post-card';
        card.innerHTML = `<img src="${img}"/><div class="title">${title}</div>`;
        card.addEventListener('click', () => showPoster(title, img, description, link));
        list.appendChild(card);
      });

      currentIndex += itemsPerPage;
      document.getElementById('loadMoreBtn').style.display = currentIndex >= allItems.length ? 'none' : 'inline-block';
    }

async function showPoster(title, fallbackImg, content, link) {
  try {
    const proxyURL = `https://api.allorigins.win/raw?url=${encodeURIComponent(link)}`;
    const res = await fetch(proxyURL);
    const html = await res.text();
    const doc = new DOMParser().parseFromString(html, 'text/html');
    const ogImg = doc.querySelector('meta[property="og:image"]')?.content;
    const finalImg = ogImg || fallbackImg;

    const proxy = 'https://images.weserv.nl/?url=' + encodeURIComponent(finalImg) + '&w=1080&h=1080&fit=cover&output=jpg&sharp=1';

    const bgImage = document.getElementById('bgImage');
    const blurBg = document.getElementById('blurBg');

    blurBg.src = proxy + '&t=' + Date.now();
    blurBg.setAttribute('crossorigin', 'anonymous');

    bgImage.src = proxy + '&t=' + Date.now();
    bgImage.setAttribute('crossorigin', 'anonymous');

    document.getElementById('judulPreview').textContent = title;
    document.getElementById('output').style.display = 'block';
    selectedContent = content;
    selectedLink = link;

  } catch (err) {
    alert("âŒ Gagal mengambil gambar og:image.");
    console.error(err);
  }
}

    document.getElementById('loadMoreBtn').addEventListener('click', showNextItems);

    document.getElementById('downloadBtn').addEventListener('click', () => {
      const outputEl = document.getElementById('output');
      const imageEl = document.getElementById('bgImage');
      if (!imageEl.complete) {
        alert('Tunggu gambar selesai dimuat.');
        return;
      }
      domtoimage.toBlob(outputEl).then(blob => {
        const link = document.createElement('a');
        link.download = 'candil-kuya.png';
        link.href = URL.createObjectURL(blob);
        link.click();
      }).catch(err => {
        alert('âŒ Gagal membuat gambar.');
        console.error(err);
      });
    });

    document.getElementById('copyBtn').addEventListener('click', () => {
      if (!selectedContent) return alert('Pilih artikel dulu.');
      const plainText = stripHtmlTags(selectedContent).trim().substring(0, 300);
      const text = 'ðŸš¨CANDILKUYA - ' + plainText + '\n\n#Berita #Bola #sports #okezone #Football\n\n...Follow fb @Candilkuya';
      navigator.clipboard.writeText(text).then(() => {
        alert('âœ”ï¸ Berita berhasil disalin!');
      });
    });
document.getElementById('moreBtn').addEventListener('click', () => {
  if (!selectedLink) return alert('Pilih artikel dulu.');
  window.open(selectedLink, '_blank');
});

    document.addEventListener('DOMContentLoaded', loadFeed);
  </script>-->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/dom-to-image/2.6.0/dom-to-image.min.js"></script>

<script>

let allItems = [];
let currentIndex = 0;
const itemsPerPage = 6;

let selectedContent = '';
let selectedLink = '';

const NOIMAGE =
'https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjA6kcY4Hzd73dnIOUXZps2RBiFDtK32lafwhLC4s0Wi4ccw2w1Zu5PZLZriKb873MU9OTdwo-ySCLx5uVamhGdqwNlovTYSzqfN_zXiJi-4-DKXFob7Blx2bsgCi10hrUF480ZwpLdjxsGxMQvHcBZUKPD313JB2PH3ovOk0N2TsYLjY4pWlFSma6ahUw/s1600/noimage.jpg';


function stripHtmlTags(html){
const div=document.createElement('div');
div.innerHTML=html;
return div.innerText;
}



function loadFeed(){

const url =
'https://sindikasi.okezone.com/index.php/rss/14/RSS2.0';

fetch(url)

.then(r=>r.text())

.then(data=>{

const parser=new DOMParser();

const xml=
parser.parseFromString(
data,
'application/xml'
);

const items=
Array.from(
xml.getElementsByTagName('item')
);


allItems=items.map(item=>{

const title=
item.querySelector('title')
?.textContent.trim()||'';

const description=
item.querySelector('description')
?.textContent||'';

const link=
item.querySelector('link')
?.textContent||'';

const mediaContent=
item.getElementsByTagName('media:content')[0];

const img=
mediaContent?.getAttribute('url')
||NOIMAGE;

return{
title,
description,
link,
img
};

});


showNextItems();

})

.catch(err=>{

console.error(err);

alert("âŒ Gagal memuat RSS.");

});

}



function showNextItems(){

const list=
document.getElementById('postList');

const nextItems=
allItems.slice(
currentIndex,
currentIndex+itemsPerPage
);


nextItems.forEach(
({title,description,link,img})=>{

const card=
document.createElement('div');

card.className='post-card';

card.innerHTML=
`<img src="${img}">
<div class="title">
${title}
</div>`;

card.onclick=()=>showPoster(
title,
img,
description,
link
);

list.appendChild(card);

});


currentIndex+=itemsPerPage;

document.getElementById('loadMoreBtn')
.style.display=
currentIndex>=allItems.length
?'none':'inline-block';

}



async function showPoster(
title,
fallbackImg,
content,
link
){

try{

let finalImg=fallbackImg;


/* Proxy 1 */

try{

const proxy1=
'https://api.allorigins.win/raw?url='+
encodeURIComponent(link);

const res1=
await fetch(proxy1);

const html1=
await res1.text();

const doc1=
new DOMParser()
.parseFromString(
html1,
'text/html'
);

const og1=
doc1.querySelector(
'meta[property="og:image"]'
)?.content;

if(og1) finalImg=og1;

}catch(e){}



/* Proxy 2 fallback */

if(!finalImg || finalImg===NOIMAGE){

try{

const proxy2=
'https://corsproxy.io/?'+
encodeURIComponent(link);

const res2=
await fetch(proxy2);

const html2=
await res2.text();

const doc2=
new DOMParser()
.parseFromString(
html2,
'text/html'
);

const og2=
doc2.querySelector(
'meta[property="og:image"]'
)?.content;

if(og2) finalImg=og2;

}catch(e){}

}


/* fallback terakhir */

if(!finalImg){

finalImg=NOIMAGE;

}


/* Proxy gambar */

const proxyImg=

'https://images.weserv.nl/?url='+
encodeURIComponent(finalImg)+
'&w=1080&h=1080&fit=cover&output=jpg&sharp=1';



const bgImage=
document.getElementById('bgImage');

const blurBg=
document.getElementById('blurBg');


bgImage.src=
proxyImg+'&t='+Date.now();

blurBg.src=
proxyImg+'&t='+Date.now();


bgImage.crossOrigin='anonymous';
blurBg.crossOrigin='anonymous';



document.getElementById(
'judulPreview'
).textContent=title;


document.getElementById(
'output'
).style.display='block';


selectedContent=content;

selectedLink=link;


}catch(err){

alert("âŒ Gagal mengambil gambar");

console.error(err);

}

}



document.getElementById(
'loadMoreBtn'
).onclick=showNextItems;



document.getElementById(
'downloadBtn'
).onclick=()=>{

const outputEl=
document.getElementById('output');

const imageEl=
document.getElementById('bgImage');

if(!imageEl.complete){

alert('Tunggu gambar selesai dimuat');

return;

}


domtoimage
.toBlob(outputEl)

.then(blob=>{

const link=
document.createElement('a');

link.download=
'candil-kuya.png';

link.href=
URL.createObjectURL(blob);

link.click();

})

.catch(err=>{

alert('âŒ Gagal membuat gambar');

console.error(err);

});

};



document.getElementById(
'copyBtn'
).onclick=()=>{

if(!selectedContent)
return alert('Pilih artikel dulu');

const plainText=
stripHtmlTags(
selectedContent
).trim().substring(0,300);


const text=

'ðŸš¨CANDILKUYA - '+
plainText+

'\n\n#Berita #Karawang #okezone'+

'\n\nFollow FB Candilkuya';


navigator.clipboard
.writeText(text)

.then(()=>{

alert('âœ”ï¸ Berhasil disalin');

});

};



document.getElementById(
'moreBtn'
).onclick=()=>{

if(!selectedLink)
return alert('Pilih artikel dulu');

window.open(
selectedLink,
'_blank'
);

};



document.addEventListener(
'DOMContentLoaded',
loadFeed
);

</script>
</body>
</html>
